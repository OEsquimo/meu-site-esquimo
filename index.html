<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Orçamento O Esquimó</title>
  <link rel="stylesheet" href="assets/style.css?v=10" />
  <!-- Biblioteca do calendário -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>

  <!-- Topo com imagem -->
  <header class="topo">
    <img src="assets/imagens/tecnico-trabalhando.jpg" alt="Técnico trabalhando" />
  </header>

  <!-- Seção de serviços -->
  <section class="servicos container">
    <h2>Escolha um dos serviços clicando na imagem e faça seu orçamento</h2>

    <div class="servicos-imagens">
      <div class="servico" data-servico="Instalação">
        <img src="assets/imagens/instalacao-ar.jpg" alt="Instalação" />
        <p>Instalação</p>
      </div>
      <div class="servico" data-servico="Limpeza Split">
        <img src="assets/imagens/limpeza-split.jpg" alt="Limpeza Split" />
        <p>Limpeza Split</p>
      </div>
      <div class="servico" data-servico="Manutenção">
        <img src="assets/imagens/manutencao-ar.jpg" alt="Manutenção" />
        <p>Manutenção</p>
      </div>
    </div>
  </section>

  <!-- Formulário principal -->
  <section class="formulario container">
    <form id="formulario" novalidate>
      <input type="hidden" id="servicoSelecionado" name="servicoSelecionado" value="" />

      <!-- Dados do cliente -->
      <label for="nome">Nome:</label>
      <input type="text" id="nome" placeholder="Digite seu nome completo" required />
      
      <label for="endereco">Endereço:</label>
      <input type="text" id="endereco" placeholder="Rua, número, bairro" required />

      <label for="whatsapp">WhatsApp:</label>
      <input type="text" id="whatsapp" placeholder="(xx) xxxxx-xxxx" required />

      <!-- Campos condicionais -->
      <div id="campo-btus-wrapper">
        <label for="btus">Capacidade em BTUs:</label>
        <select id="btus" name="btus">
          <option value="">Selecione</option>
          <option value="9000">9.000</option>
          <option value="12000">12.000</option>
          <option value="18000">18.000</option>
          <option value="24000">24.000</option>
          <option value="30000">30.000</option>
        </select>
      </div>

      <div id="campo-defeito-wrapper" style="display:none;">
        <label for="defeito">Descreva o problema:</label>
        <textarea id="defeito" placeholder="Ex: Ar não está gelando..."></textarea>
      </div>

      <!-- Resultado do orçamento -->
      <div id="relatorio" style="margin-top: 20px; white-space: pre-line; background: #e6f2ff; padding: 10px; border-left: 5px solid #0055aa;"></div>

      <!-- Seção de Agendamento (NOVO) -->
      <div id="agendamento" style="display: none; margin-top: 25px; padding-top: 20px; border-top: 1px dashed #ddd;">
        <h3 style="margin-bottom: 15px;">⏰ Agendar Serviço</h3>
        
        <label for="data_agendamento">Data:</label>
        <input type="text" id="data_agendamento" class="agendamento-campo" placeholder="Selecione a data" readonly required />
        
        <label for="horario_agendamento">Horário:</label>
        <select id="horario_agendamento" class="agendamento-campo" required>
          <option value="">Selecione primeiro a data</option>
        </select>
        
        <label for="forma_pagamento">Forma de pagamento:</label>
        <select id="forma_pagamento" class="agendamento-campo" required>
          <option value="">Selecione...</option>
          <option value="Pix">Pix</option>
          <option value="Dinheiro">Dinheiro</option>
          <option value="Cartão de Crédito">Cartão de Crédito</option>
          <option value="Cartão de Débito">Cartão de Débito</option>
        </select>
        
        <label for="obs_cliente">Observações:</label>
        <textarea id="obs_cliente" class="agendamento-campo" rows="3" placeholder="Detalhes adicionais (opcional)"></textarea>
        
        <button type="button" id="btn_confirmar_agendamento" class="whatsapp-button" style="margin-top: 15px;">
          <img src="assets/imagens/whatsapp-icon.png" alt="WhatsApp" style="width: 20px;">
          Confirmar Agendamento
        </button>
      </div>

      <!-- Botão original (agora só mostra o agendamento) -->
      <button type="button" id="enviarBtn" class="whatsapp-button">
        <img src="assets/imagens/whatsapp-icon.png" alt="WhatsApp" style="width: 20px;">
        Gerar Orçamento
      </button>
    </form>
  </section>

  <!-- Rodapé com data -->
  <p id="ultima-atualizacao" style="font-size: 12px; color: #999; text-align: center; margin-top: 30px;"></p>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="assets/script.js?v=10"></script>
  <script>
    // Atualização de data (mantido seu código original)
    const dataUltimaAtualizacao = new Date(document.lastModified);
    const elemento = document.getElementById("ultima-atualizacao");
    const opcoes = { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' };
    elemento.textContent = "Última atualização: " + dataUltimaAtualizacao.toLocaleString('pt-BR', opcoes);
  </script>
</body>
</html>
